<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>ê²½ì¡°ì‚¬ - ê²½ì¡°ì‚¬ì˜ Luma</title>
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#0b1020" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <style>
    :root {
      --bg: #0b1020; --card: #131b33; --card-hover: #1a2545;
      --muted: #8b97b8; --line: #1f2d4d; --accent: #7c9cff;
      --accent-soft: rgba(124,156,255,0.12); --ok: #46d39a; --ok-soft: rgba(70,211,154,0.12);
      --warn: #ffb454; --warn-soft: rgba(255,180,84,0.12);
      --danger: #ff6b8a; --danger-soft: rgba(255,107,138,0.12);
      --text: #eef2ff; --text-dim: #a3aec9;
      --radius: 16px; --radius-sm: 10px;
      --safe-bottom: env(safe-area-inset-bottom, 0px);
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html, body { height: 100%; overflow: hidden; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Pretendard', sans-serif;
      background: var(--bg); color: var(--text);
      -webkit-font-smoothing: antialiased;
    }

    /* App Shell */
    .app { display: flex; flex-direction: column; height: 100vh; height: 100dvh; }
    .app-header {
      padding: 16px 20px 12px; flex-shrink: 0;
      background: rgba(11,16,32,0.92); backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--line); z-index: 10;
    }
    .app-header h1 { font-size: 22px; font-weight: 800; letter-spacing: -0.3px; }
    .app-header .subtitle { font-size: 13px; color: var(--muted); margin-top: 2px; }

    .app-body { flex: 1; overflow-y: auto; -webkit-overflow-scrolling: touch; padding-bottom: calc(70px + var(--safe-bottom)); }

    /* Bottom Nav */
    .bottom-nav {
      position: fixed; bottom: 0; left: 0; right: 0;
      display: flex; justify-content: space-around; align-items: center;
      background: rgba(11,16,32,0.95); backdrop-filter: blur(20px);
      border-top: 1px solid var(--line);
      padding: 8px 0 calc(8px + var(--safe-bottom));
      z-index: 100;
    }
    .nav-item {
      display: flex; flex-direction: column; align-items: center; gap: 3px;
      background: none; border: none; color: var(--muted); cursor: pointer;
      font-size: 11px; padding: 6px 12px; transition: color 0.2s;
    }
    .nav-item.active { color: var(--accent); }
    .nav-item svg { width: 24px; height: 24px; }

    /* Screen */
    .screen { display: none; padding: 20px; }
    .screen.active { display: block; }

    /* Cards */
    .event-card {
      background: var(--card); border: 1px solid var(--line);
      border-radius: var(--radius); padding: 18px; margin-bottom: 12px;
      cursor: pointer; transition: all 0.2s;
    }
    .event-card:hover, .event-card:active { background: var(--card-hover); transform: scale(0.99); }
    .event-date {
      display: inline-flex; align-items: center; gap: 6px;
      font-size: 12px; color: var(--accent); font-weight: 600;
      background: var(--accent-soft); padding: 4px 10px;
      border-radius: 20px; margin-bottom: 10px;
    }
    .event-title { font-size: 18px; font-weight: 700; margin-bottom: 6px; }
    .event-meta { font-size: 13px; color: var(--muted); display: flex; gap: 14px; flex-wrap: wrap; }
    .event-meta span { display: inline-flex; align-items: center; gap: 4px; }
    .event-type-badge {
      display: inline-block; font-size: 11px; font-weight: 700;
      padding: 3px 8px; border-radius: 6px; margin-bottom: 8px;
    }
    .badge-wedding { background: var(--danger-soft); color: var(--danger); }
    .badge-funeral { background: #1a1a2e; color: #8b8baa; }
    .badge-birthday { background: var(--warn-soft); color: var(--warn); }
    .badge-baby { background: var(--ok-soft); color: var(--ok); }
    .badge-housewarming { background: #1c2a3d; color: #6baed6; }

    /* Stats */
    .stats-row { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 16px; }
    .stat-card {
      background: var(--card); border: 1px solid var(--line);
      border-radius: var(--radius-sm); padding: 14px; text-align: center;
    }
    .stat-label { font-size: 11px; color: var(--muted); text-transform: uppercase; letter-spacing: 0.5px; }
    .stat-value { font-size: 22px; font-weight: 800; margin-top: 4px; }

    /* Section */
    .section-title { font-size: 16px; font-weight: 700; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }
    .section-title .count { font-size: 12px; color: var(--accent); background: var(--accent-soft); padding: 2px 8px; border-radius: 10px; }

    /* Host Dashboard */
    .host-tabs { display: flex; gap: 8px; margin-bottom: 16px; overflow-x: auto; -webkit-overflow-scrolling: touch; }
    .host-tab {
      white-space: nowrap; padding: 8px 16px; border: 1px solid var(--line);
      border-radius: 20px; background: var(--card); color: var(--text-dim);
      cursor: pointer; font-size: 13px; font-weight: 600; transition: all 0.2s;
    }
    .host-tab.active { background: var(--accent); border-color: var(--accent); color: #07102d; }

    /* Guest List */
    .guest-row {
      display: flex; align-items: center; padding: 12px 14px;
      background: var(--card); border: 1px solid var(--line);
      border-radius: var(--radius-sm); margin-bottom: 8px; gap: 12px;
    }
    .guest-avatar {
      width: 36px; height: 36px; border-radius: 50%;
      background: var(--accent-soft); display: flex; align-items: center;
      justify-content: center; font-size: 14px; font-weight: 700; color: var(--accent);
      flex-shrink: 0;
    }
    .guest-info { flex: 1; min-width: 0; }
    .guest-name { font-size: 14px; font-weight: 600; }
    .guest-group { font-size: 12px; color: var(--muted); }
    .status-pill {
      font-size: 11px; font-weight: 700; padding: 4px 10px;
      border-radius: 20px; white-space: nowrap;
    }
    .status-confirmed { background: var(--ok-soft); color: var(--ok); }
    .status-pending { background: var(--warn-soft); color: var(--warn); }
    .status-declined { background: var(--danger-soft); color: var(--danger); }

    /* Cost Panel */
    .cost-summary {
      background: linear-gradient(135deg, #162040, #1a2850);
      border: 1px solid var(--line); border-radius: var(--radius);
      padding: 20px; margin-bottom: 16px;
    }
    .cost-total { font-size: 32px; font-weight: 800; }
    .cost-saved { color: var(--ok); font-size: 14px; margin-top: 4px; }
    .cost-bar { height: 6px; background: var(--line); border-radius: 3px; margin-top: 12px; overflow: hidden; }
    .cost-bar-fill { height: 100%; border-radius: 3px; transition: width 0.5s; }

    /* Detail Modal */
    .modal-overlay {
      display: none; position: fixed; inset: 0;
      background: rgba(0,0,0,0.6); z-index: 200;
      animation: fadeIn 0.2s;
    }
    .modal-overlay.active { display: flex; align-items: flex-end; }
    .modal-sheet {
      width: 100%; max-height: 85vh; background: var(--bg);
      border-radius: 20px 20px 0 0; padding: 20px;
      overflow-y: auto; animation: slideUp 0.3s;
    }
    .modal-handle { width: 36px; height: 4px; background: var(--line); border-radius: 2px; margin: 0 auto 16px; }
    .modal-close { position: absolute; top: 20px; right: 20px; background: none; border: none; color: var(--muted); cursor: pointer; font-size: 20px; }

    /* RSVP Action */
    .rsvp-actions { display: flex; gap: 10px; margin-top: 16px; }
    .btn {
      flex: 1; padding: 14px; border: none; border-radius: 12px;
      font-size: 15px; font-weight: 700; cursor: pointer; transition: all 0.2s;
    }
    .btn-primary { background: var(--accent); color: #07102d; }
    .btn-primary:active { background: #6888dd; }
    .btn-secondary { background: var(--card); color: var(--text); border: 1px solid var(--line); }
    .btn-danger { background: var(--danger-soft); color: var(--danger); }

    /* Animations */
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }

    /* Amount input */
    .amount-section { margin-top: 16px; }
    .amount-input-wrap {
      display: flex; align-items: center; background: var(--card);
      border: 1px solid var(--line); border-radius: 12px;
      padding: 12px 16px; gap: 8px;
    }
    .amount-input-wrap span { color: var(--muted); font-size: 16px; }
    .amount-input {
      flex: 1; background: none; border: none; color: var(--text);
      font-size: 20px; font-weight: 700; outline: none;
    }
    .quick-amounts { display: flex; gap: 8px; margin-top: 8px; }
    .quick-amount {
      padding: 6px 12px; border: 1px solid var(--line); border-radius: 8px;
      background: var(--card); color: var(--text-dim); font-size: 12px;
      cursor: pointer; transition: all 0.2s;
    }
    .quick-amount:active { background: var(--accent-soft); color: var(--accent); }

    /* Empty state */
    .empty-state { text-align: center; padding: 40px 20px; color: var(--muted); }
    .empty-state svg { width: 48px; height: 48px; margin-bottom: 12px; opacity: 0.5; }
    .empty-state p { font-size: 14px; }

    /* Scrollbar */
    .app-body::-webkit-scrollbar { width: 0; }

    /* FAB */
    .fab {
      position: fixed; bottom: calc(80px + var(--safe-bottom)); right: 20px;
      width: 52px; height: 52px; border-radius: 50%;
      background: var(--accent); border: none; color: #07102d;
      font-size: 28px; cursor: pointer; z-index: 50;
      display: flex; align-items: center; justify-content: center;
      box-shadow: 0 4px 20px rgba(124,156,255,0.3);
      transition: all 0.2s;
    }
    .fab:active { transform: scale(0.92); }

    /* Timeline */
    .timeline-month { font-size: 13px; font-weight: 700; color: var(--accent); margin: 16px 0 8px; padding-left: 4px; }

    /* Filter chips */
    .filter-row { display: flex; gap: 8px; margin-bottom: 16px; overflow-x: auto; -webkit-overflow-scrolling: touch; padding-bottom: 4px; }
    .filter-chip {
      white-space: nowrap; padding: 6px 14px; border: 1px solid var(--line);
      border-radius: 20px; background: var(--card); color: var(--text-dim);
      cursor: pointer; font-size: 12px; font-weight: 600; transition: all 0.2s;
    }
    .filter-chip.active { background: var(--accent); border-color: var(--accent); color: #07102d; }

    /* Profile */
    .profile-header { text-align: center; padding: 20px 0; }
    .profile-avatar {
      width: 64px; height: 64px; border-radius: 50%;
      background: var(--accent-soft); margin: 0 auto 10px;
      display: flex; align-items: center; justify-content: center;
      font-size: 24px; font-weight: 800; color: var(--accent);
    }
    .profile-name { font-size: 20px; font-weight: 700; }
    .profile-stats { display: flex; justify-content: center; gap: 24px; margin-top: 12px; }
    .profile-stat { text-align: center; }
    .profile-stat-value { font-size: 18px; font-weight: 700; }
    .profile-stat-label { font-size: 11px; color: var(--muted); }

    .menu-item {
      display: flex; align-items: center; gap: 14px;
      padding: 14px; background: var(--card); border: 1px solid var(--line);
      border-radius: var(--radius-sm); margin-bottom: 8px; cursor: pointer;
    }
    .menu-item:active { background: var(--card-hover); }
    .menu-icon { width: 36px; height: 36px; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 18px; }
    .menu-label { font-size: 14px; font-weight: 600; }
    .menu-desc { font-size: 12px; color: var(--muted); }

    /* D-day badge */
    .dday { font-size: 12px; font-weight: 700; padding: 3px 8px; border-radius: 6px; }
    .dday-soon { background: var(--danger-soft); color: var(--danger); }
    .dday-upcoming { background: var(--warn-soft); color: var(--warn); }
    .dday-far { background: var(--accent-soft); color: var(--accent); }
  </style>
</head>
<body>
<div class="app">
  <!-- Header -->
  <div class="app-header" id="appHeader">
    <h1 id="headerTitle">ê²½ì¡°ì‚¬</h1>
    <div class="subtitle" id="headerSubtitle">ë‚´ ê²½ì¡°ì‚¬ë¥¼ í•œëˆˆì—</div>
  </div>

  <!-- App Body -->
  <div class="app-body">

    <!-- Screen 1: ì°¸ê°€ì - ì´ë²¤íŠ¸ ëª©ë¡ -->
    <div class="screen active" id="screen-events">
      <div class="filter-row">
        <button class="filter-chip active" data-filter="all">ì „ì²´</button>
        <button class="filter-chip" data-filter="wedding">ğŸ’’ ê²°í˜¼</button>
        <button class="filter-chip" data-filter="funeral">ğŸ•Šï¸ ë¶€ê³ </button>
        <button class="filter-chip" data-filter="birthday">ğŸ‚ ìƒì¼</button>
        <button class="filter-chip" data-filter="baby">ğŸ¼ ëŒì”ì¹˜</button>
        <button class="filter-chip" data-filter="housewarming">ğŸ  ì§‘ë“¤ì´</button>
      </div>

      <div class="timeline-month">2026ë…„ 2ì›”</div>
      <div id="eventList"></div>

      <div class="timeline-month">2026ë…„ 3ì›”</div>
      <div id="eventListMarch"></div>
    </div>

    <!-- Screen 2: í˜¸ìŠ¤íŠ¸ - RSVP ëŒ€ì‹œë³´ë“œ -->
    <div class="screen" id="screen-host">
      <div class="host-tabs">
        <button class="host-tab active" data-host-tab="overview">í˜„í™©</button>
        <button class="host-tab" data-host-tab="guests">í•˜ê° ê´€ë¦¬</button>
        <button class="host-tab" data-host-tab="cost">ë¹„ìš© ìµœì í™”</button>
      </div>

      <!-- Overview -->
      <div class="host-panel active" id="host-overview">
        <div class="stats-row">
          <div class="stat-card">
            <div class="stat-label">ì´ˆëŒ€</div>
            <div class="stat-value">342</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">í™•ì •</div>
            <div class="stat-value" style="color:var(--ok)">243</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">ë¯¸ì‘ë‹µ</div>
            <div class="stat-value" style="color:var(--warn)">73</div>
          </div>
        </div>
        <div class="stats-row">
          <div class="stat-card">
            <div class="stat-label">ì‘ë‹µë¥ </div>
            <div class="stat-value">71%</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">ë…¸ì‡¼ ìœ„í—˜</div>
            <div class="stat-value" style="color:var(--danger)">26</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">D-day</div>
            <div class="stat-value" style="color:var(--accent)">D-14</div>
          </div>
        </div>

        <div class="section-title">ê·¸ë£¹ë³„ ì „í™˜ í˜„í™©</div>
        <div class="guest-row">
          <div class="guest-avatar">ì¹œ</div>
          <div class="guest-info">
            <div class="guest-name">ì¹œêµ¬/ë™ë£Œ <span style="color:var(--muted);font-size:12px">38ëª… ë¯¸ì‘ë‹µ</span></div>
            <div class="guest-group">SMS + ì¹´ì¹´ì˜¤í†¡ ë¦¬ë§ˆì¸ë“œ ì¶”ì²œ</div>
          </div>
          <span class="status-pill status-confirmed">+21ëª… ì˜ˆìƒ</span>
        </div>
        <div class="guest-row">
          <div class="guest-avatar">ì¹œ</div>
          <div class="guest-info">
            <div class="guest-name">ì¹œì²™ <span style="color:var(--muted);font-size:12px">19ëª… ë¯¸ì‘ë‹µ</span></div>
            <div class="guest-group">ê°€ì¡± ëŒ€í‘œ 1ì°¨ í™•ì¸ ì¶”ì²œ</div>
          </div>
          <span class="status-pill status-confirmed">+10ëª… ì˜ˆìƒ</span>
        </div>
        <div class="guest-row">
          <div class="guest-avatar">ì—…</div>
          <div class="guest-info">
            <div class="guest-name">ì—…ë¬´ê´€ê³„ì <span style="color:var(--muted);font-size:12px">16ëª… ë¯¸ì‘ë‹µ</span></div>
            <div class="guest-group">ì¼ì • ì¬í™•ì¸ ë§í¬ ì „ì†¡ ì¶”ì²œ</div>
          </div>
          <span class="status-pill status-declined">+4ëª… ì˜ˆìƒ</span>
        </div>
      </div>

      <!-- Guest Management -->
      <div class="host-panel" id="host-guests" style="display:none">
        <div class="filter-row">
          <button class="filter-chip active" data-guest-filter="all">ì „ì²´ (342)</button>
          <button class="filter-chip" data-guest-filter="confirmed">í™•ì • (243)</button>
          <button class="filter-chip" data-guest-filter="pending">ë¯¸ì‘ë‹µ (73)</button>
          <button class="filter-chip" data-guest-filter="declined">ë¶ˆì°¸ (26)</button>
        </div>
        <div id="guestList"></div>
      </div>

      <!-- Cost Optimizer -->
      <div class="host-panel" id="host-cost" style="display:none">
        <div class="cost-summary">
          <div class="stat-label">ì˜ˆìƒ ì´ ë¹„ìš©</div>
          <div class="cost-total">â‚©14,420,000</div>
          <div class="cost-saved">â–¼ â‚©1,420,000 ì ˆê° (ê· í˜• ëª¨ë“œ)</div>
          <div class="cost-bar"><div class="cost-bar-fill" style="width:72%;background:var(--ok)"></div></div>
        </div>
        <div class="section-title">ì‹œë‚˜ë¦¬ì˜¤ ë¹„êµ</div>
        <div class="event-card" style="cursor:default">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div>
              <div style="font-size:13px;color:var(--muted)">ë³´ìˆ˜ì  (ê³¼ë°œì£¼)</div>
              <div style="font-size:18px;font-weight:700;margin-top:2px">â‚©17,030,000</div>
            </div>
            <div style="text-align:right;font-size:13px;color:var(--muted)">300ì„ Â· 320ê°œ</div>
          </div>
        </div>
        <div class="event-card" style="cursor:default;border-color:var(--ok)">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div>
              <div style="font-size:13px;color:var(--ok);font-weight:700">âœ“ ê· í˜• (ê¶Œì¥)</div>
              <div style="font-size:18px;font-weight:700;margin-top:2px">â‚©14,420,000</div>
            </div>
            <div style="text-align:right;font-size:13px;color:var(--muted)">276ì„ Â· 285ê°œ</div>
          </div>
        </div>
        <div class="event-card" style="cursor:default">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div>
              <div style="font-size:13px;color:var(--danger)">ê³µê²©ì  (ë¦¬ìŠ¤í¬)</div>
              <div style="font-size:18px;font-weight:700;margin-top:2px">â‚©13,910,000</div>
            </div>
            <div style="text-align:right;font-size:13px;color:var(--muted)">258ì„ Â· 265ê°œ</div>
          </div>
        </div>
        <div style="margin-top:12px;padding:12px;background:var(--warn-soft);border-radius:10px;font-size:13px;color:var(--warn)">
          âš ï¸ ê³µê²©ì  ëª¨ë“œëŠ” ë…¸ì‡¼ìœ¨ ì˜ˆì¸¡ì´ ë¹—ë‚˜ê°ˆ ê²½ìš° ì¢Œì„ ë¶€ì¡± ë¦¬ìŠ¤í¬ê°€ ìˆìŠµë‹ˆë‹¤.
        </div>
      </div>
    </div>

    <!-- Screen 3: ë‚´ ì¶•ì˜ê¸ˆ ë‚´ì—­ -->
    <div class="screen" id="screen-history">
      <div class="stats-row">
        <div class="stat-card">
          <div class="stat-label">ì˜¬í•´ ì§€ì¶œ</div>
          <div class="stat-value" style="color:var(--danger)">â‚©85ë§Œ</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">ì°¸ì„ íšŸìˆ˜</div>
          <div class="stat-value">7</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">í‰ê·  ê¸ˆì•¡</div>
          <div class="stat-value">â‚©12.1ë§Œ</div>
        </div>
      </div>
      <div class="section-title">ì¶•ì˜ê¸ˆ/ì¡°ì˜ê¸ˆ ê¸°ë¡</div>
      <div id="historyList"></div>
    </div>

    <!-- Screen 4: í”„ë¡œí•„ -->
    <div class="screen" id="screen-profile">
      <div class="profile-header">
        <div class="profile-avatar">ê¹€</div>
        <div class="profile-name">ê¹€ë¯¼ìˆ˜</div>
        <div style="font-size:13px;color:var(--muted);margin-top:4px">@minsu.kim</div>
        <div class="profile-stats">
          <div class="profile-stat">
            <div class="profile-stat-value">12</div>
            <div class="profile-stat-label">ì°¸ì„</div>
          </div>
          <div class="profile-stat">
            <div class="profile-stat-value">3</div>
            <div class="profile-stat-label">í˜¸ìŠ¤íŠ¸</div>
          </div>
          <div class="profile-stat">
            <div class="profile-stat-value">â‚©210ë§Œ</div>
            <div class="profile-stat-label">ì´ ì§€ì¶œ</div>
          </div>
        </div>
      </div>

      <div class="section-title" style="margin-top:20px">ì„¤ì •</div>
      <div class="menu-item">
        <div class="menu-icon" style="background:var(--accent-soft);color:var(--accent)">ğŸ””</div>
        <div>
          <div class="menu-label">ì•Œë¦¼ ì„¤ì •</div>
          <div class="menu-desc">ê²½ì¡°ì‚¬ ë¦¬ë§ˆì¸ë”, D-day ì•Œë¦¼</div>
        </div>
      </div>
      <div class="menu-item">
        <div class="menu-icon" style="background:var(--ok-soft);color:var(--ok)">ğŸ’°</div>
        <div>
          <div class="menu-label">ì¶•ì˜ê¸ˆ ê´€ë¦¬</div>
          <div class="menu-desc">ê¸ˆì•¡ ê¸°ë¡ ë° í†µê³„</div>
        </div>
      </div>
      <div class="menu-item">
        <div class="menu-icon" style="background:var(--warn-soft);color:var(--warn)">ğŸ‘¥</div>
        <div>
          <div class="menu-label">ì—°ë½ì²˜ ì—°ë™</div>
          <div class="menu-desc">ì£¼ì†Œë¡ì—ì„œ í•˜ê° ê°€ì ¸ì˜¤ê¸°</div>
        </div>
      </div>
      <div class="menu-item">
        <div class="menu-icon" style="background:var(--danger-soft);color:var(--danger)">âš™ï¸</div>
        <div>
          <div class="menu-label">ì•± ì„¤ì •</div>
          <div class="menu-desc">í…Œë§ˆ, ì–¸ì–´, ê°œì¸ì •ë³´</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Bottom Navigation -->
  <nav class="bottom-nav">
    <button class="nav-item active" data-screen="events">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
      ì¼ì •
    </button>
    <button class="nav-item" data-screen="host">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2L2 7l10 5 10-5-10-5z"/><path d="M2 17l10 5 10-5"/><path d="M2 12l10 5 10-5"/></svg>
      í˜¸ìŠ¤íŠ¸
    </button>
    <button class="nav-item" data-screen="history">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>
      ë‚´ì—­
    </button>
    <button class="nav-item" data-screen="profile">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
      í”„ë¡œí•„
    </button>
  </nav>

  <!-- FAB for adding events (host) -->
  <button class="fab" id="fabBtn" style="display:none" onclick="showCreateModal()">+</button>

  <!-- Event Detail Modal -->
  <div class="modal-overlay" id="eventModal">
    <div class="modal-sheet" id="eventModalContent"></div>
  </div>
</div>

<script>
// â”€â”€ Data â”€â”€
const events = [
  { id: 1, type: 'wedding', title: 'ê¹€ì˜ìˆ˜ â™¥ ì´ì§€í˜„ ê²°í˜¼ì‹', date: '2026-02-22', time: '12:00', location: 'ë”ì±„í”Œì•³ì²­ë‹´ 3ì¸µ', host: 'ê¹€ì˜ìˆ˜', dday: 3, amount: null, rsvp: null, note: 'ëŒ€í•™ ë™ê¸°' },
  { id: 2, type: 'funeral', title: 'ë°•ì„±í˜¸ë‹˜ ë¶€ì¹œìƒ', date: '2026-02-20', time: 'ë¹ˆì†Œ 3ì¼ì¥', location: 'ì„œìš¸ì•„ì‚°ë³‘ì› ì¥ë¡€ì‹ì¥', host: 'ë°•ì„±í˜¸', dday: 1, amount: null, rsvp: null, note: 'íŒ€ì¥ë‹˜ ë¶€ì¹œ' },
  { id: 3, type: 'baby', title: 'ìµœë¯¼ì • ì•„ê¸° ëŒì”ì¹˜', date: '2026-02-28', time: '11:30', location: 'ê·¸ëœë“œííŠ¼ ì»¨ë²¤ì…˜í™€', host: 'ìµœë¯¼ì •', dday: 9, amount: null, rsvp: null, note: 'íšŒì‚¬ ë™ê¸°' },
  { id: 4, type: 'birthday', title: 'ì •ì˜ˆì§„ ìƒì¼íŒŒí‹°', date: '2026-02-25', time: '19:00', location: 'ì´íƒœì› ë£¨í”„íƒ‘ë°”', host: 'ì •ì˜ˆì§„', dday: 6, amount: null, rsvp: null, note: 'ì¹œí•œ ì¹œêµ¬' },
  { id: 5, type: 'wedding', title: 'í•œìŠ¹ìš° â™¥ ì„œìœ ë‚˜ ê²°í˜¼ì‹', date: '2026-03-07', time: '14:00', location: 'ë°˜í¬ JWë©”ë¦¬ì–´íŠ¸ ê·¸ëœë“œë³¼ë£¸', host: 'í•œìŠ¹ìš°', dday: 16, amount: null, rsvp: null, note: 'ê³ ë“±í•™êµ ì¹œêµ¬' },
  { id: 6, type: 'housewarming', title: 'ì´ë™í›ˆ ì§‘ë“¤ì´', date: '2026-03-14', time: '17:00', location: 'ë§ˆí¬êµ¬ ìƒì•”ë™ ìƒˆ ì•„íŒŒíŠ¸', host: 'ì´ë™í›ˆ', dday: 23, amount: null, rsvp: null, note: 'ì „ ì§ì¥ ë™ë£Œ' },
  { id: 7, type: 'wedding', title: 'ê¹€íƒœí˜¸ â™¥ ì¥ì„œì—° ê²°í˜¼ì‹', date: '2026-03-21', time: '11:00', location: 'ì‹ ë¼í˜¸í…” ë‹¤ì´ë„ˆìŠ¤í‹°í™€', host: 'ê¹€íƒœí˜¸', dday: 30, amount: null, rsvp: null, note: 'ì‚¬ì´Œ' },
  { id: 8, type: 'funeral', title: 'ì˜¤ì§„ìš°ë‹˜ ëª¨ì¹œìƒ', date: '2026-03-05', time: 'ë¹ˆì†Œ 3ì¼ì¥', location: 'ì„¸ë¸Œë€ìŠ¤ë³‘ì› ì¥ë¡€ì‹ì¥', host: 'ì˜¤ì§„ìš°', dday: 14, amount: null, rsvp: null, note: 'ë™ë„¤ ì´ì›ƒ' },
];

const guests = [
  { name: 'ê¹€ë¯¼ì£¼', group: 'ëŒ€í•™ ì¹œêµ¬', status: 'confirmed' },
  { name: 'ì´í•˜ëŠ˜', group: 'ì§ì¥ ë™ë£Œ', status: 'confirmed' },
  { name: 'ë°•ì¤€í˜¸', group: 'ê³ ë“±í•™êµ', status: 'pending' },
  { name: 'ìµœì„œì—°', group: 'ì§ì¥ ë™ë£Œ', status: 'confirmed' },
  { name: 'ì •ë¯¼ê¸°', group: 'ì¹œì²™', status: 'confirmed' },
  { name: 'í•œìˆ˜ë¹ˆ', group: 'ëŒ€í•™ ì¹œêµ¬', status: 'declined' },
  { name: 'ì˜¤ì˜ë¯¼', group: 'ì§ì¥ ë™ë£Œ', status: 'pending' },
  { name: 'ìœ¤ì†Œí¬', group: 'ê³ ë“±í•™êµ', status: 'confirmed' },
  { name: 'ì¥íƒœì˜', group: 'ì¹œì²™', status: 'pending' },
  { name: 'ì„ì±„ì€', group: 'ëŒ€í•™ ì¹œêµ¬', status: 'confirmed' },
  { name: 'ì†¡ì§€ì•ˆ', group: 'ì§ì¥ ë™ë£Œ', status: 'confirmed' },
  { name: 'ì‹ í˜„ìš°', group: 'ì—…ë¬´ ê´€ê³„', status: 'pending' },
];

const history = [
  { name: 'ì´ì¬ë¯¼ â™¥ ê°•í•˜ë‚˜ ê²°í˜¼ì‹', date: '2026-01-18', type: 'wedding', amount: 100000, attended: true },
  { name: 'ê¹€ì„œì¤€ë‹˜ ë¶€ì¹œìƒ', date: '2026-01-10', type: 'funeral', amount: 50000, attended: true },
  { name: 'ë°•ì˜ˆì€ ì•„ê¸° ëŒì”ì¹˜', date: '2025-12-20', type: 'baby', amount: 50000, attended: true },
  { name: 'ì •ìš°ì„± â™¥ ë‚˜ì€ ê²°í˜¼ì‹', date: '2025-12-06', type: 'wedding', amount: 100000, attended: true },
  { name: 'ìµœë¯¼í˜¸ ì§‘ë“¤ì´', date: '2025-11-22', type: 'housewarming', amount: 0, attended: true },
  { name: 'í•œì†Œí¬ ìƒì¼', date: '2025-11-15', type: 'birthday', amount: 50000, attended: true },
  { name: 'ì˜¤ì„¸í›ˆ â™¥ ê¹€ì˜ˆì§€ ê²°í˜¼ì‹', date: '2025-10-25', type: 'wedding', amount: 200000, attended: false },
];

// â”€â”€ Type Config â”€â”€
const typeConfig = {
  wedding: { label: 'ê²°í˜¼', badge: 'badge-wedding', emoji: 'ğŸ’’', defaultAmount: 50000 },
  funeral: { label: 'ë¶€ê³ ', badge: 'badge-funeral', emoji: 'ğŸ•Šï¸', defaultAmount: 50000 },
  birthday: { label: 'ìƒì¼', badge: 'badge-birthday', emoji: 'ğŸ‚', defaultAmount: 30000 },
  baby: { label: 'ëŒì”ì¹˜', badge: 'badge-baby', emoji: 'ğŸ¼', defaultAmount: 50000 },
  housewarming: { label: 'ì§‘ë“¤ì´', badge: 'badge-housewarming', emoji: 'ğŸ ', defaultAmount: 0 },
};

// â”€â”€ Render Events â”€â”€
function renderEvents(filter = 'all') {
  const febEvents = events.filter(e => e.date.startsWith('2026-02') && (filter === 'all' || e.type === filter));
  const marEvents = events.filter(e => e.date.startsWith('2026-03') && (filter === 'all' || e.type === filter));

  document.getElementById('eventList').innerHTML = febEvents.map(e => eventCardHTML(e)).join('');
  document.getElementById('eventListMarch').innerHTML = marEvents.map(e => eventCardHTML(e)).join('');
}

function eventCardHTML(e) {
  const cfg = typeConfig[e.type];
  const ddayClass = e.dday <= 3 ? 'dday-soon' : e.dday <= 7 ? 'dday-upcoming' : 'dday-far';
  const rsvpText = e.rsvp === 'confirmed' ? '<span class="status-pill status-confirmed">ì°¸ì„ í™•ì •</span>'
    : e.rsvp === 'declined' ? '<span class="status-pill status-declined">ë¶ˆì°¸</span>'
    : '<span class="status-pill status-pending">ë¯¸ì‘ë‹µ</span>';
  return `
    <div class="event-card" onclick="openEventModal(${e.id})">
      <div style="display:flex;justify-content:space-between;align-items:start">
        <span class="event-type-badge ${cfg.badge}">${cfg.emoji} ${cfg.label}</span>
        <span class="dday ${ddayClass}">D-${e.dday}</span>
      </div>
      <div class="event-title">${e.title}</div>
      <div class="event-meta">
        <span>ğŸ“… ${formatDate(e.date)} ${e.time}</span>
        <span>ğŸ“ ${e.location}</span>
      </div>
      <div style="margin-top:8px;display:flex;justify-content:space-between;align-items:center">
        <span style="font-size:12px;color:var(--muted)">${e.note}</span>
        ${rsvpText}
      </div>
    </div>`;
}

function formatDate(d) {
  const date = new Date(d);
  return `${date.getMonth()+1}/${date.getDate()}(${['ì¼','ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† '][date.getDay()]})`;
}

// â”€â”€ Event Modal â”€â”€
function openEventModal(id) {
  const e = events.find(ev => ev.id === id);
  if (!e) return;
  const cfg = typeConfig[e.type];
  const isRsvped = e.rsvp === 'confirmed';
  const isDeclined = e.rsvp === 'declined';

  document.getElementById('eventModalContent').innerHTML = `
    <div class="modal-handle"></div>
    <span class="event-type-badge ${cfg.badge}" style="font-size:13px">${cfg.emoji} ${cfg.label}</span>
    <h2 style="font-size:22px;font-weight:800;margin:10px 0 6px">${e.title}</h2>
    <div style="color:var(--muted);font-size:14px;margin-bottom:16px">
      <div style="margin-bottom:4px">ğŸ“… ${formatDate(e.date)} ${e.time}</div>
      <div style="margin-bottom:4px">ğŸ“ ${e.location}</div>
      <div>ğŸ‘¤ í˜¸ìŠ¤íŠ¸: ${e.host}</div>
    </div>

    <div class="amount-section">
      <div style="font-size:14px;font-weight:700;margin-bottom:8px">ğŸ’° ì¶•ì˜ê¸ˆ / ì¡°ì˜ê¸ˆ</div>
      <div class="amount-input-wrap">
        <span>â‚©</span>
        <input class="amount-input" type="number" id="amountInput" placeholder="ê¸ˆì•¡ ì…ë ¥"
          value="${e.amount || ''}" onchange="setAmount(${e.id}, this.value)" />
        <span style="font-size:12px;color:var(--muted)">ì›</span>
      </div>
      <div class="quick-amounts">
        <button class="quick-amount" onclick="setQuickAmount(${e.id}, 30000)">3ë§Œì›</button>
        <button class="quick-amount" onclick="setQuickAmount(${e.id}, 50000)">5ë§Œì›</button>
        <button class="quick-amount" onclick="setQuickAmount(${e.id}, 100000)">10ë§Œì›</button>
        <button class="quick-amount" onclick="setQuickAmount(${e.id}, 200000)">20ë§Œì›</button>
      </div>
    </div>

    <div style="margin-top:16px;padding:14px;background:var(--card);border:1px solid var(--line);border-radius:12px">
      <div style="font-size:13px;color:var(--muted);margin-bottom:6px">ğŸ“ ë©”ëª¨</div>
      <div style="font-size:14px">${e.note}</div>
    </div>

    <div class="rsvp-actions">
      <button class="btn ${isRsvped ? 'btn-secondary' : 'btn-primary'}" onclick="setRsvp(${e.id}, 'confirmed')">
        ${isRsvped ? 'âœ“ ì°¸ì„ í™•ì •ë¨' : 'ì°¸ì„í• ê²Œìš”'}
      </button>
      <button class="btn ${isDeclined ? 'btn-danger' : 'btn-secondary'}" onclick="setRsvp(${e.id}, 'declined')">
        ${isDeclined ? 'âœ— ë¶ˆì°¸ í™•ì •' : 'ë¶ˆì°¸'}
      </button>
    </div>

    <button class="btn btn-secondary" style="width:100%;margin-top:10px" onclick="closeModal()">ë‹«ê¸°</button>
  `;
  document.getElementById('eventModal').classList.add('active');
}

function closeModal() {
  document.getElementById('eventModal').classList.remove('active');
}

function setRsvp(id, status) {
  const e = events.find(ev => ev.id === id);
  if (e) { e.rsvp = status; openEventModal(id); renderEvents(currentFilter); }
}

function setAmount(id, val) {
  const e = events.find(ev => ev.id === id);
  if (e) e.amount = parseInt(val) || null;
}

function setQuickAmount(id, val) {
  const e = events.find(ev => ev.id === id);
  if (e) { e.amount = val; document.getElementById('amountInput').value = val; }
}

// â”€â”€ Guests â”€â”€
function renderGuests(filter = 'all') {
  const list = filter === 'all' ? guests : guests.filter(g => g.status === filter);
  document.getElementById('guestList').innerHTML = list.map(g => {
    const statusClass = g.status === 'confirmed' ? 'status-confirmed' : g.status === 'pending' ? 'status-pending' : 'status-declined';
    const statusLabel = g.status === 'confirmed' ? 'í™•ì •' : g.status === 'pending' ? 'ë¯¸ì‘ë‹µ' : 'ë¶ˆì°¸';
    return `
      <div class="guest-row">
        <div class="guest-avatar">${g.name[0]}</div>
        <div class="guest-info">
          <div class="guest-name">${g.name}</div>
          <div class="guest-group">${g.group}</div>
        </div>
        <span class="status-pill ${statusClass}">${statusLabel}</span>
      </div>`;
  }).join('');
}

// â”€â”€ History â”€â”€
function renderHistory() {
  document.getElementById('historyList').innerHTML = history.map(h => {
    const cfg = typeConfig[h.type];
    return `
      <div class="guest-row">
        <div class="guest-avatar" style="font-size:16px">${cfg.emoji}</div>
        <div class="guest-info">
          <div class="guest-name">${h.name}</div>
          <div class="guest-group">${h.date} Â· ${h.attended ? 'ì°¸ì„' : 'ë¯¸ì°¸ì„'}</div>
        </div>
        <span style="font-size:15px;font-weight:700;color:${h.amount > 0 ? 'var(--danger)' : 'var(--muted)'}">
          ${h.amount > 0 ? '-â‚©' + (h.amount/10000) + 'ë§Œ' : '-'}
        </span>
      </div>`;
  }).join('');
}

// â”€â”€ Navigation â”€â”€
let currentFilter = 'all';

document.querySelectorAll('.nav-item').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.nav-item').forEach(x => x.classList.remove('active'));
    document.querySelectorAll('.screen').forEach(x => x.classList.remove('active'));
    btn.classList.add('active');
    const screen = btn.dataset.screen;
    document.getElementById('screen-' + screen).classList.add('active');

    const titles = { events: 'ê²½ì¡°ì‚¬', host: 'í˜¸ìŠ¤íŠ¸ ëŒ€ì‹œë³´ë“œ', history: 'ì¶•ì˜ê¸ˆ ë‚´ì—­', profile: 'í”„ë¡œí•„' };
    const subs = { events: 'ë‚´ ê²½ì¡°ì‚¬ë¥¼ í•œëˆˆì—', host: 'RSVP ê´€ë¦¬ & ë¹„ìš© ìµœì í™”', history: 'ì§€ì¶œ ê¸°ë¡ ê´€ë¦¬', profile: 'ê³„ì • ì„¤ì •' };
    document.getElementById('headerTitle').textContent = titles[screen];
    document.getElementById('headerSubtitle').textContent = subs[screen];

    document.getElementById('fabBtn').style.display = screen === 'host' ? 'flex' : 'none';
  });
});

// Filter chips
document.querySelectorAll('.filter-row .filter-chip[data-filter]').forEach(chip => {
  chip.addEventListener('click', () => {
    chip.parentElement.querySelectorAll('.filter-chip').forEach(c => c.classList.remove('active'));
    chip.classList.add('active');
    currentFilter = chip.dataset.filter;
    renderEvents(currentFilter);
  });
});

// Guest filter
document.querySelectorAll('.filter-chip[data-guest-filter]').forEach(chip => {
  chip.addEventListener('click', () => {
    chip.parentElement.querySelectorAll('.filter-chip').forEach(c => c.classList.remove('active'));
    chip.classList.add('active');
    renderGuests(chip.dataset.guestFilter);
  });
});

// Host tabs
document.querySelectorAll('.host-tab').forEach(tab => {
  tab.addEventListener('click', () => {
    document.querySelectorAll('.host-tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.host-panel').forEach(p => p.style.display = 'none');
    tab.classList.add('active');
    document.getElementById('host-' + tab.dataset.hostTab).style.display = 'block';
  });
});

// Modal close on overlay click
document.getElementById('eventModal').addEventListener('click', (e) => {
  if (e.target === document.getElementById('eventModal')) closeModal();
});

// â”€â”€ Init â”€â”€
renderEvents();
renderGuests();
renderHistory();
</script>
</body>
</html>
